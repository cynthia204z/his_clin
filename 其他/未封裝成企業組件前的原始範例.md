<h1>ComChrBas</h1>

## index.vue

```html
<template>
  <div class="JNPF-common-layout">
    <div class="JNPF-common-layout-center">
      <el-row class="JNPF-common-search-box" :gutter="16">
        <el-form @submit.native.prevent>
          <el-col :span="6">
            <el-form-item label="病歷號碼">
              <el-input v-model="query.chartNo" placeholder="請輸入" clearable></el-input>
            </el-form-item>
          </el-col>
          <el-col :span="6">
            <el-form-item label="姓名">
              <el-input v-model="query.patName" placeholder="請輸入" clearable></el-input>
            </el-form-item>
          </el-col>
          <el-col :span="6">
            <el-form-item label="證號">
              <el-input v-model="query.idNo" placeholder="請輸入" clearable></el-input>
            </el-form-item>
          </el-col>
          <template v-if="showAll">
            <el-col :span="6">
              <el-form-item label="出生日期">
                <el-date-picker
                                v-model="query.birthDate"
                                placeholder="請選擇"
                                value-format="timestamp"
                                format="yyyy-MM-dd"
                                />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="電話號碼">
                <el-input v-model="query.telNo" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="手機號碼">
                <el-input v-model="query.mobile" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="郵遞區號">
                <el-select v-model="query.zipCode" placeholder="請選擇" clearable>
                  <el-option
                             v-for="(item, index) in zipCodeOptions"
                             :key="index"
                             :label="item.fullName"
                             :value="item.id"
                             :disabled="item.disabled"
                             ></el-option>
                </el-select>
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="縣市">
                <el-input v-model="query.city" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="鄉鎮區">
                <el-input v-model="query.town" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="村里">
                <el-input v-model="query.village" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="路">
                <el-input v-model="query.road" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="路/弄/段/號/樓">
                <el-input v-model="query.otherAddress" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
            <el-col :span="6">
              <el-form-item label="通訊地址">
                <el-input v-model="query.addrName" placeholder="請輸入" clearable />
              </el-form-item>
            </el-col>
          </template>
          <el-col :span="6">
            <el-form-item>
              <el-button type="primary" icon="el-icon-search" @click="search()">查询</el-button>
              <el-button icon="el-icon-refresh-right" @click="reset()">重置</el-button>
              <el-button
                         type="text"
                         icon="el-icon-arrow-down"
                         @click="showAll = true"
                         v-if="!showAll"
                         >展开</el-button>
              <el-button type="text" icon="el-icon-arrow-up" @click="showAll = false" v-else>收起</el-button>
            </el-form-item>
          </el-col>
        </el-form>
      </el-row>
      <div class="JNPF-common-layout-main JNPF-flex-main">
        <div class="JNPF-common-head">
          <div>
            <el-button type="primary" icon="el-icon-plus" @click="addOrUpdateHandle()">新增</el-button>
            <el-button type="primary" icon="el-icon-book" @click="saveRecord()">保存</el-button>
            <el-button type="primary">首頁簽章</el-button>
          </div>
          <div class="JNPF-common-head-right">
            <el-tooltip effect="dark" content="刷新" placement="top">
              <el-link
                       icon="icon-ym icon-ym-Refresh JNPF-common-head-icon"
                       :underline="false"
                       @click="reset()"
                       />
            </el-tooltip>
            <screenfull :isContainer="true" />
            <el-tooltip effect="dark" content="列设置" placement="top">
              <el-link icon="icon-ym icon-ym-options JNPF-common-head-icon" :underline="false" />
            </el-tooltip>
          </div>
        </div>
        <JNPF-table 
                    v-loading="listLoading" 
                    :data="list" 
                    @sort-change="sortChange" 
                    @current-change="handleChange"
                    >
          <el-table-column prop="chartNo" label="病歷號碼" align="left" width="150">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.chartNo"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="patName" label="姓名" align="left" width="100">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.patName"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column label="郵遞區號" prop="zipCode" algin="left" width="50">
            <template slot-scope="scope">{{ scope.row.zipCode }}</template>
          </el-table-column>
          <el-table-column prop="city" label="縣市" align="left" />
          <el-table-column prop="town" label="鄉鎮區" align="left" />
          <el-table-column prop="village" label="村里" align="left">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.village"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="road" label="路" align="left" width="150">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.road"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="otherAddress" label="路/弄/段/號/樓" align="left" width="150">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.otherAddress"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="addrName" label="通訊地址" align="left" width="150">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.addrName"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="idType" label="證號類別" align="left" width="150">
            <template slot-scope="scope">
              <el-select
                         v-model="scope.row.idType"
                         placeholder="請選擇"
                         clearable
                         :multiple="false"
                         @change="handleChange(scope.row)"
                         >
                <el-option
                           v-for="(item, index) in idTypeOptions"
                           :key="index"
                           :label="item.CODE_DESC"
                           :value="item.CODE_NO"
                           :disabled="item.disabled"
                           ></el-option>
              </el-select>
            </template>
          </el-table-column>
          <el-table-column prop="idNo" label="證號" align="left" width="150">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.idNo"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="birthDate" label="出生日期" align="left" width="150">
            <template slot-scope="scope">
              <el-date-picker
                              v-model="scope.row.birthDate"
                              type="date"
                              placeholder="請選擇"
                              format="yyyy-MM-dd"
                              value-format="yyyy-MM-dd"
                              />
            </template>
          </el-table-column>
          <el-table-column prop="mobile" label="手機號碼" align="left" width="150">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.mobile"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="telNo" label="電話號碼" align="left" width="150">
            <template slot-scope="scope">
              <el-input
                        v-model="scope.row.telNo"
                        placeholder="請輸入"
                        size="small"
                        controls-position="right"
                        />
            </template>
          </el-table-column>
          <el-table-column prop="version" label="版本" align="left" v-if="false" />
          <el-table-column label="操作" fixed="right" width="100">
            <template slot-scope="scope">
              <el-button type="text" @click="addOrUpdateHandle(scope.row.id)">編輯</el-button>
              <el-button type="text" class="JNPF-table-delBtn" @click="handleDel(scope.row.id)">刪除</el-button>
            </template>
          </el-table-column>
        </JNPF-table>
        <pagination
                    :total="total"
                    :page.sync="listQuery.currentPage"
                    :limit.sync="listQuery.pageSize"
                    @pagination="initData"
                    />
      </div>
    </div>
    <JNPF-Form v-if="formVisible" ref="JNPFForm" @refresh="refresh" />
    <ExportBox v-if="exportBoxVisible" ref="ExportBox" @download="download" />
  </div>
</template>

<script>
  import request from "@/utils/request";
  import { getDictionaryDataSelector } from "@/api/systemData/dictionary";
  import JNPFForm from "./Form";
  import ExportBox from "./ExportBox";
  import { previewDataInterface } from "@/api/systemData/dataInterface";

  export default {
    components: { JNPFForm, ExportBox },
    data() {
      return {
        selected: [],
        showAll: false,
        query: {
          chartNo: undefined,
          patName: undefined,
          idNo: undefined,
          birthDate: undefined,
          telNo: undefined,
          mobile: undefined,
          zipCode: undefined,
          city: undefined,
          town: undefined,
          village: undefined,
          road: undefined,
          otherAddress: undefined,
          addrName: undefined,
        },
        defaultProps: {
          children: "children",
          label: "fullName",
        },
        list: [],
        listLoading: true,
        total: 0,
        listQuery: {
          currentPage: 1,
          pageSize: 20,
          sort: "asc",
          sidx: "",
        },
        formVisible: false,
        exportBoxVisible: false,
        columnList: [
          { prop: "chartNo", label: "病歷號碼" },
          { prop: "patName", label: "姓名" },
          { prop: "zipCode", label: "郵遞區號" },
          { prop: "city", label: "縣市" },
          { prop: "town", label: "鄉鎮區" },
          { prop: "village", label: "村里" },
          { prop: "road", label: "路" },
          { prop: "otherAddress", label: "路/弄/段/號/樓" },
          { prop: "addrName", label: "通訊地址" },
          { prop: "idType", label: "證號類別" },
          { prop: "idNo", label: "證號" },
          { prop: "birthDate", label: "出生日期" },
          { prop: "mobile", label: "手機號碼" },
          { prop: "telNo", label: "電話號碼" },
          { prop: "version", label: "版本" },
        ],
        zipCodeOptions: [
          { fullName: "宜蘭縣宜蘭市", id: "260" },
          { fullName: "宜蘭縣頭城鎮", id: "261" },
          { fullName: "宜蘭縣礁溪鄉", id: "262" },
          { fullName: "宜蘭縣壯圍鄉", id: "263" },
        ],
        zipCodeOptions: [
          { fullName: "宜蘭縣宜蘭市", id: "260" },
          { fullName: "宜蘭縣頭城鎮", id: "261" },
          { fullName: "宜蘭縣礁溪鄉", id: "262" },
          { fullName: "宜蘭縣壯圍鄉", id: "263" },
        ],
        idTypeOptions: [],
      };
    },
    computed: {},
    created() {
      this.getidTypeOptions();
      this.initData();
    },
    methods: {
      getidTypeOptions() {
        previewDataInterface("aa8e3456deeb484e9e432d4f51f722f6").then((res) => {
          this.idTypeOptions = res.data;
        });
      },
      sortChange({ column, prop, order }) {
        this.listQuery.sort = order == "ascending" ? "asc" : "desc";
        this.listQuery.sidx = !order ? "" : prop;
        this.initData();
      },
      initData() {
        this.listLoading = true;
        let _query = {
          ...this.listQuery,
          ...this.query,
        };
        let query = {};
        for (let key in _query) {
          if (Array.isArray(_query[key])) {
            query[key] = _query[key].join();
          } else {
            query[key] = _query[key];
          }
        }
        request({
          url: `/api/his7/com/chartinfo/ComChrbas`,
          method: "get",
          data: query,
        }).then((res) => {
          this.list = res.data.list;
          this.total = res.data.pagination.total;

          this.listLoading = false;
        });
      },
      handleDel(id) {
        this.$confirm("此操作将永久删除该数据, 是否继续?", "提示", {
          type: "warning",
        })
          .then(() => {
          request({
            url: `/api/his7/com/chartinfo/ComChrbas/${id}`,
            method: "DELETE",
          }).then((res) => {
            this.$message({
              type: "success",
              message: res.msg,
              onClose: () => {
                this.initData();
              },
            });
          });
        })
          .catch(() => {});
      },
      addOrUpdateHandle(id, isDetail) {
        this.formVisible = true;
        this.$nextTick(() => {
          this.$refs.JNPFForm.init(id, isDetail);
        });
      },
      exportData() {
        this.exportBoxVisible = true;
        this.$nextTick(() => {
          this.$refs.ExportBox.init(this.columnList);
        });
      },
      download(data) {
        let query = { ...data, ...this.listQuery, ...this.query };
        request({
          url: `/api/his7/com/chartinfo/ComChrbas/Actions/Export`,
          method: "GET",
          data: query,
        }).then((res) => {
          if (!res.data.url) return;
          window.location.href = this.define.comUrl + res.data.url;
          this.$refs.ExportBox.visible = false;
          this.exportBoxVisible = false;
        });
      },
      search() {
        this.listQuery = {
          currentPage: 1,
          pageSize: 20,
          sort: "asc",
          sidx: "",
        };
        this.initData();
      },
      refresh(isrRefresh) {
        this.formVisible = false;
        if (isrRefresh) this.reset();
      },
      reset() {
        for (let key in this.query) {
          this.query[key] = undefined;
        }
        this.listQuery = {
          currentPage: 1,
          pageSize: 20,
          sort: "asc",
          sidx: "",
        };
        this.initData();
      },
      handleChange(val) {
        if (val) {
          this.selected.push(val["id"]);
        }
      },
      async saveRecord() {
        let i, j;
        let rec;
        let dataForm = {
          version: 0,
          chartNo: "",
          patName: undefined,
          zipCode: "",
          city: undefined,
          town: undefined,
          village: undefined,
          road: undefined,
          otherAddress: undefined,
          addrName: undefined,
          idType: "",
          idNo: undefined,
          birthDate: undefined,
          mobile: undefined,
          telNo: undefined,
        };
        for (i = 0; i < this.selected.length; i++) {
          for (j = 0; j < this.list.length; j++) {
            if (this.selected[i] === this.list[j].id) {
              rec = this.list[j];
              await request({
                url: "/api/his7/com/chartinfo/ComChrbas/" + rec.id,
                method: "get",
              }).then((res) => {
                dataForm = res.data;
                const formatbirthDate = this.$moment(rec.birthDate).format(
                  "YYYY-MM-DD HH:mm:ss"
                );
                dataForm.version = rec.version;
                dataForm.chartNo = rec.chartNo;
                dataForm.patName = rec.patName;
                dataForm.zipCode = rec.zipCode;
                dataForm.city = rec.city;
                dataForm.town = rec.town;
                dataForm.village = rec.village;
                dataForm.road = rec.road;
                dataForm.otherAddress = rec.otherAddress;
                dataForm.addrName = rec.addrName;
                dataForm.idType = rec.idType;
                dataForm.idNo = rec.idNo;
                dataForm.birthDate = new Date(
                  Date.parse(formatbirthDate)
                ).getTime();
                dataForm.mobile = rec.mobile;
                dataForm.telNo = rec.telNo;
                request({
                  url:
                  "/api/his7/com/chartinfo/ComChrbas/" + dataForm.id,
                  method: "PUT",
                  data: dataForm,
                }).then((res) => {
                  this.$message({
                    message: res.msg,
                    type: "success",
                    duration: 500,
                    onClose: () => {
                      this.visible = false;
                      // this.$emit('refresh', true)
                    },
                  });
                });
              });
              break;
            }
          }
        }
        this.selected = [];
      },

    },
  };
</script>

```

## Form.vue

```html
<template>
  <transition name="el-zoom-in-center">
    <div class="JNPF-preview-main">
      <div class="JNPF-common-page-header">
        <el-page-header @back="goBack" :content="!dataForm.id ? '新建' : isDetail ? '詳情' : '編輯'" />
        <div class="options">
          <el-button type="primary" @click="dataFormSubmit()" v-if="!isDetail">確 定</el-button>
          <el-button @click="goBack">取 消</el-button>
        </div>
      </div>
      <el-row :gutter="5" class="main" :style="{ margin: '0 auto', width: '100%' }">
        <el-form
                 ref="elForm"
                 :model="dataForm"
                 :rules="rules"
                 size="mini"
                 label-width="150px"
                 label-position="right"
                 :disabled="!!isDetail"
                 >
          <el-col :span="24">
            <el-form-item label-width="0">
              <groupTitle content="病患明細/新增" />
            </el-form-item>
          </el-col>

          <el-col :span="24" v-if="false">
            <el-form-item label="版本" prop="version">
              <el-input-number v-model="dataForm.version" placeholder="數字文本" :step="1"></el-input-number>
            </el-form-item>
          </el-col>

          <!-- 患者資訊 -->
          <el-col :span="24">
            <SubTitle titleText="患者資訊">
              <el-col :span="12">
                <el-form-item label="病歷號碼" prop="chartNo">
                  <el-input
                            v-model="dataForm.chartNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="姓名" prop="patName" required>
                  <el-input
                            v-model="dataForm.patName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="全名" prop="fullPatName">
                  <el-input
                            v-model="dataForm.fullPatName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="英文姓名" prop="engPatName">
                  <el-input
                            v-model="dataForm.engPatName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="證號類別" prop="idType">
                  <el-select
                             v-model="dataForm.idType"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in idTypeOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="證號" prop="idNo">
                  <el-input
                            v-model="dataForm.idNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="性別" prop="sexType" required>
                  <el-select
                             v-model="dataForm.sexType"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in sexTypeOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="出生日期" prop="birthDate" required>
                  <el-date-picker
                                  v-model="dataForm.birthDate"
                                  placeholder="請選擇"
                                  clearable
                                  :style="{ width: '100%' }"
                                  type="date"
                                  format="yyyy-MM-dd"
                                  value-format="timestamp"
                                  ></el-date-picker>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="出生地" prop="birthPlace">
                  <el-select
                             v-model="dataForm.birthPlace"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in birthPlaceOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="國籍" prop="countryCode" required>
                  <el-select
                             v-model="dataForm.countryCode"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in countryCodeOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="族群" prop="tribeCode">
                  <el-input
                            v-model="dataForm.tribeCode"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="職業" prop="occupation">
                  <el-select
                             v-model="dataForm.occupation"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in occupationOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="教育程度" prop="education">
                  <el-select
                             v-model="dataForm.education"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in educationOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="婚姻狀態" prop="marriageState">
                  <el-select
                             v-model="dataForm.marriageState"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in marriageStateOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="初診日" prop="firstOpdDate">
                  <el-date-picker
                                  v-model="dataForm.firstOpdDate"
                                  placeholder="請選擇"
                                  clearable
                                  :style="{ width: '100%' }"
                                  type="date"
                                  format="yyyy-MM-dd"
                                  value-format="timestamp"
                                  ></el-date-picker>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="血型" prop="bloodType">
                  <el-select
                             v-model="dataForm.bloodType"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in bloodTypeOptions"
                               :key="index"
                               :label="item.CODE_DESC"
                               :value="item.CODE_NO"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>
            </SubTitle>
          </el-col>

          <!-- 通訊資訊 -->
          <el-col :span="24">
            <SubTitle titleText="通訊資訊">
              <el-col :span="8">
                <el-form-item label="電話號碼" prop="telNo">
                  <el-input
                            v-model="dataForm.telNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="白天電話號碼" prop="telNod">
                  <el-input
                            v-model="dataForm.telNod"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="夜晚電話號碼" prop="telNon">
                  <el-input
                            v-model="dataForm.telNon"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="手機號碼" prop="mobile">
                  <el-input
                            v-model="dataForm.mobile"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="16">
                <el-form-item label="電子信箱" prop="mails">
                  <el-input
                            v-model="dataForm.mails"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="郵遞區號" prop="zipCode">
                  <el-select
                             v-model="dataForm.zipCode"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in zipCodeOptions"
                               :key="index"
                               :label="item.fullName"
                               :value="item.id"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="縣市" prop="city">
                  <el-input
                            v-model="dataForm.city"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="鄉鎮區" prop="town">
                  <el-input
                            v-model="dataForm.town"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="村里" prop="village">
                  <el-input
                            v-model="dataForm.village"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="路" prop="road">
                  <el-input
                            v-model="dataForm.road"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="路/弄/段/號/樓" prop="otherAddress">
                  <el-input
                            v-model="dataForm.otherAddress"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="套用至通訊地址">
                  <el-switch
                             v-model="ApplyToAddrName"
                             :active-value="1"
                             :inactive-value="0"
                             class="table-switch"
                             />
                  <!-- @click.native="handleUpdateState" -->
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="通訊地址" prop="addrName">
                  <el-input
                            v-model="dataForm.addrName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="英文地址" prop="engAddr">
                  <el-input
                            v-model="dataForm.engAddr"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="戶籍地址同通訊地址">
                  <el-switch
                             v-model="AddrNameSameAsForeverAddrName"
                             :active-value="1"
                             :inactive-value="0"
                             class="table-switch"
                             />
                  <!-- @click.native="handleUpdateState" -->
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="戶籍郵遞區號" prop="foreverZipCode">
                  <el-select
                             v-model="dataForm.foreverZipCode"
                             placeholder="請選擇"
                             clearable
                             :style="{ width: '100%' }"
                             :multiple="false"
                             >
                    <el-option
                               v-for="(item, index) in foreverZipCodeOptions"
                               :key="index"
                               :label="item.fullName"
                               :value="item.id"
                               :disabled="item.disabled"
                               ></el-option>
                  </el-select>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="戶籍縣市" prop="foreverCity">
                  <el-input
                            v-model="dataForm.foreverCity"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="戶籍鄉鎮區" prop="foreverTown">
                  <el-input
                            v-model="dataForm.foreverTown"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="戶籍村里" prop="foreverVillage">
                  <el-input
                            v-model="dataForm.foreverVillage"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="戶籍路" prop="foreverRoad">
                  <el-input
                            v-model="dataForm.foreverRoad"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="戶籍弄/段/號/樓" prop="foreverOtherAddress">
                  <el-input
                            v-model="dataForm.foreverOtherAddress"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="套用至戶籍地址">
                  <el-switch
                             v-model="ApplyToForeverAddrName"
                             :active-value="1"
                             :inactive-value="0"
                             class="table-switch"
                             />
                  <!-- @click.native="handleUpdateState" -->
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="戶籍地址" prop="foreverAddrName">
                  <el-input
                            v-model="dataForm.foreverAddrName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>
            </SubTitle>
          </el-col>

          <!-- 父母親 -->
          <el-col :span="24">
            <SubTitle titleText="父母親">
              <el-col :span="8">
                <el-form-item label="父親姓名" prop="fatherName">
                  <el-input
                            v-model="dataForm.fatherName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="父親出生日期" prop="fatherBirthDate">
                  <el-date-picker
                                  v-model="dataForm.fatherBirthDate"
                                  placeholder="請選擇"
                                  clearable
                                  :style="{ width: '100%' }"
                                  type="date"
                                  format="yyyy-MM-dd"
                                  value-format="timestamp"
                                  ></el-date-picker>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="父親身份證號" prop="fatherIdNo">
                  <el-input
                            v-model="dataForm.fatherIdNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="母親姓名" prop="motherName">
                  <el-input
                            v-model="dataForm.motherName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="母親出生日期" prop="motherBirthDate">
                  <el-date-picker
                                  v-model="dataForm.motherBirthDate"
                                  placeholder="請選擇"
                                  clearable
                                  :style="{ width: '100%' }"
                                  type="date"
                                  format="yyyy-MM-dd"
                                  value-format="timestamp"
                                  ></el-date-picker>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="母親身份證號" prop="motherIdNo">
                  <el-input
                            v-model="dataForm.motherIdNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>
            </SubTitle>
          </el-col>

          <!-- 緊急連絡人 -->
          <el-col :span="24">
            <SubTitle titleText="緊急連絡人">
              <el-col :span="8">
                <el-form-item label="緊急連絡人" prop="contName">
                  <el-input
                            v-model="dataForm.contName"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人電話" prop="contTelNo">
                  <el-input
                            v-model="dataForm.contTelNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人手機" prop="contCelNo">
                  <el-input
                            v-model="dataForm.contCelNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="緊急連絡人地址" prop="contAddr">
                  <el-input
                            v-model="dataForm.contAddr"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人_1" prop="contName1">
                  <el-input
                            v-model="dataForm.contName1"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人電話_1" prop="contTelNo1">
                  <el-input
                            v-model="dataForm.contTelNo1"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人手機_1" prop="contCelNo1">
                  <el-input
                            v-model="dataForm.contCelNo1"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="緊急連絡人地址_1" prop="contAddr1">
                  <el-input
                            v-model="dataForm.contAddr1"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人_2" prop="contName2">
                  <el-input
                            v-model="dataForm.contName2"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人電話_2" prop="contTelNo2">
                  <el-input
                            v-model="dataForm.contTelNo2"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="緊急連絡人手機_2" prop="contCelNo2">
                  <el-input
                            v-model="dataForm.contCelNo2"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="緊急連絡人地址_2" prop="contAddr2">
                  <el-input
                            v-model="dataForm.contAddr2"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>
            </SubTitle>
          </el-col>

          <!-- 其他資訊 -->
          <el-col :span="24">
            <SubTitle titleText="其他資訊">
              <el-col :span="8">
                <el-form-item label="身份別" prop="patId" required>
                  <el-input
                            v-model="dataForm.patId"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="爽約次數" prop="dispCnt">
                  <el-input-number v-model="dataForm.dispCnt" placeholder="數字文本" :step="1"></el-input-number>
                </el-form-item>
              </el-col>

              <el-col :span="8">
                <el-form-item label="實體病歷否" prop="realFlag">
                  <el-radio-group v-model="dataForm.realFlag" size="medium">
                    <el-radio
                              v-for="(item, index) in realFlagOptions"
                              :key="index"
                              :label="item.id"
                              :disabled="item.disabled"
                              >{{ item.fullName }}</el-radio>
                  </el-radio-group>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="死亡註記flag" prop="deadFlag">
                  <el-radio-group v-model="dataForm.deadFlag" size="medium">
                    <el-radio
                              v-for="(item, index) in deadFlagOptions"
                              :key="index"
                              :label="item.id"
                              :disabled="item.disabled"
                              >{{ item.fullName }}</el-radio>
                  </el-radio-group>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="死亡註記時間" prop="deadRegist">
                  <el-date-picker
                                  v-model="dataForm.deadRegist"
                                  placeholder="請選擇"
                                  clearable
                                  :style="{ width: '100%' }"
                                  type="datetime"
                                  format="yyyy-MM-dd HH:mm:ss"
                                  value-format="timestamp"
                                  ></el-date-picker>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="被合併否" prop="combineFlag">
                  <el-radio-group v-model="dataForm.combineFlag" size="medium">
                    <el-radio
                              v-for="(item, index) in combineFlagOptions"
                              :key="index"
                              :label="item.id"
                              :disabled="item.disabled"
                              >{{ item.fullName }}</el-radio>
                  </el-radio-group>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="併入病歷" prop="combineChartNo">
                  <el-input
                            v-model="dataForm.combineChartNo"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="被合併日期" prop="combineDate">
                  <el-date-picker
                                  v-model="dataForm.combineDate"
                                  placeholder="請選擇"
                                  clearable
                                  :style="{ width: '100%' }"
                                  type="date"
                                  format="yyyy-MM-dd"
                                  value-format="timestamp"
                                  ></el-date-picker>
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="執行合併者" prop="combineOper">
                  <el-input
                            v-model="dataForm.combineOper"
                            placeholder="請輸入"
                            clearable
                            :style="{ width: '100%' }"
                            ></el-input>
                </el-form-item>
              </el-col>

              <el-col :span="24">
                <el-form-item label="備註" prop="remark">
                  <el-input
                            v-model="dataForm.remark"
                            placeholder="請輸入"
                            :style="{ width: '100%' }"
                            true
                            type="textarea"
                            :autosize="{ minRows: 4, maxRows: 4 }"
                            ></el-input>
                </el-form-item>
              </el-col>
            </SubTitle>
          </el-col>

          <!-- 更新資訊 -->
          <el-col :span="24">
            <SubTitle titleText="更新資訊">
              <el-col :span="12">
                <el-form-item label="創建用戶" prop="creatoruserid">
                  {{dataForm.creatoruserid}}
                  <!-- <el-input
v-model="dataForm.creatoruserid"
placeholder="請輸入"
readonly
:disabled="true"
clearable
:style="{ width: '100%' }"
></el-input>-->
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="創建時間" prop="creatortime">
                  {{dataForm.creatortime}}
                  <!-- <el-date-picker
v-model="dataForm.creatortime"
placeholder="請選擇"
readonly
:disabled="true"
clearable
:style="{ width: '100%' }"
type="datetime"
format="yyyy-MM-dd HH:mm:ss"
value-format="timestamp"
></el-date-picker>-->
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="修改用戶" prop="lastmodifyuserid">
                  {{dataForm.lastmodifyuserid}}
                  <!-- <el-input
v-model="dataForm.lastmodifyuserid"
placeholder="請輸入"
readonly
:disabled="true"
clearable
:style="{ width: '100%' }"
></el-input>-->
                </el-form-item>
              </el-col>

              <el-col :span="12">
                <el-form-item label="修改時間" prop="lastmodifytime">
                  {{dataForm.lastmodifytime}}
                  <!-- <el-date-picker
v-model="dataForm.lastmodifytime"
placeholder="請選擇"
readonly
:disabled="true"
clearable
:style="{ width: '100%' }"
type="datetime"
format="yyyy-MM-dd HH:mm:ss"
value-format="timestamp"
></el-date-picker>-->
                </el-form-item>
              </el-col>
            </SubTitle>
          </el-col>
        </el-form>
      </el-row>
    </div>
  </transition>
</template>
<script>
  import request from "@/utils/request";
  import { getDictionaryDataSelector } from "@/api/systemData/dictionary";
  import { previewDataInterface } from "@/api/systemData/dataInterface";

  export default {
    components: {},
    props: [],
    data() {
      return {
        ApplyToAddrName: 0,
        ApplyToForeverAddrName: 0,
        AddrNameSameAsForeverAddrName:0,
        loading: false,
        visible: false,
        isDetail: false,
        dataForm: {
          version: 0,
          chartNo: undefined,
          patName: undefined,
          fullPatName: undefined,
          engPatName: undefined,
          idType: "",
          idNo: undefined,
          sexType: "",
          birthDate: undefined,
          birthPlace: "",
          countryCode: "",
          tribeCode: undefined,
          occupation: "",
          education: "",
          marriageState: "",
          firstOpdDate: undefined,
          bloodType: "",
          telNo: undefined,
          telNod: undefined,
          telNon: undefined,
          mobile: undefined,
          mails: undefined,
          zipCode: "",
          city: undefined,
          town: undefined,
          village: undefined,
          road: undefined,
          otherAddress: undefined,
          addrName: undefined,
          engAddr: undefined,
          foreverZipCode: "",
          foreverCity: undefined,
          foreverTown: undefined,
          foreverVillage: undefined,
          foreverRoad: undefined,
          foreverOtherAddress: undefined,
          foreverAddrName: undefined,
          fatherName: undefined,
          fatherBirthDate: undefined,
          fatherIdNo: undefined,
          motherName: undefined,
          motherBirthDate: undefined,
          motherIdNo: undefined,
          contName: undefined,
          contTelNo: undefined,
          contCelNo: undefined,
          contAddr: undefined,
          contName1: undefined,
          contTelNo1: undefined,
          contCelNo1: undefined,
          contAddr1: undefined,
          contName2: undefined,
          contTelNo2: undefined,
          contCelNo2: undefined,
          contAddr2: undefined,
          patId: undefined,
          dispCnt: undefined,
          realFlag: undefined,
          deadFlag: undefined,
          deadRegist: undefined,
          combineFlag: undefined,
          combineChartNo: undefined,
          combineDate: undefined,
          combineOper: undefined,
          remark: undefined,
          creatoruserid: undefined,
          creatortime: undefined,
          lastmodifyuserid: undefined,
          lastmodifytime: undefined,
        },
        rules: {
          patName: [
            {
              required: true,
              message: "請輸入",
              trigger: "blur",
            },
          ],
          sexType: [
            {
              required: true,
              message: "請選擇",
              trigger: "change",
            },
          ],
          birthDate: [
            {
              required: true,
              message: "請選擇",
              trigger: "change",
            },
          ],
          countryCode: [
            {
              required: true,
              message: "請選擇",
              trigger: "change",
            },
          ],
          mails: [],
          fatherIdNo: [],
          motherIdNo: [],
          patId: [
            {
              required: true,
              message: "請輸入",
              trigger: "blur",
            },
          ],
        },
        idTypeOptions: [],
        sexTypeOptions: [],
        birthPlaceOptions: [],
        countryCodeOptions: [],
        occupationOptions: [],
        educationOptions: [],
        marriageStateOptions: [],
        bloodTypeOptions: [],
        zipCodeOptions: [
          { fullName: "宜蘭縣宜蘭市", id: "260" },
          { fullName: "宜蘭縣頭城鎮", id: "261" },
          { fullName: "宜蘭縣礁溪鄉", id: "262" },
          { fullName: "宜蘭縣壯圍鄉", id: "263" },
        ],
        foreverZipCodeOptions: [
          { fullName: "宜蘭縣宜蘭市", id: "260" },
          { fullName: "宜蘭縣頭城鎮", id: "261" },
          { fullName: "宜蘭縣礁溪鄉", id: "262" },
          { fullName: "宜蘭縣壯圍鄉", id: "263" },
        ],
        realFlagOptions: [
          { fullName: "是", id: "Y" },
          { fullName: "否", id: "N" },
        ],
        deadFlagOptions: [
          { fullName: "是", id: "Y" },
          { fullName: "否", id: "N" },
        ],
        combineFlagOptions: [
          { fullName: "是", id: "Y" },
          { fullName: "否", id: "N" },
        ],
      };
    },
    computed: {},
    watch: {},
    created() {
      this.getidTypeOptions();
      this.getsexTypeOptions();
      this.getbirthPlaceOptions();
      this.getcountryCodeOptions();
      this.getoccupationOptions();
      this.geteducationOptions();
      this.getmarriageStateOptions();
      this.getbloodTypeOptions();
    },
    mounted() {},
    methods: {
      // handleUpdateState() {
      //   this.ApplyToAddrName = this.ApplyToAddrName ? 0 : 1
      // },
      getidTypeOptions() {
        previewDataInterface("aa8e3456deeb484e9e432d4f51f722f6").then((res) => {
          this.idTypeOptions = res.data;
        });
      },
      getsexTypeOptions() {
        previewDataInterface("ab531dc011e54f6fadb49ece9d7e73af").then((res) => {
          this.sexTypeOptions = res.data;
        });
      },
      getbirthPlaceOptions() {
        previewDataInterface("a13d03d79a994778aa3572999d6826a0").then((res) => {
          this.birthPlaceOptions = res.data;
        });
      },
      getcountryCodeOptions() {
        previewDataInterface("8ce26b4ce399457cafca18b4a621f65a").then((res) => {
          this.countryCodeOptions = res.data;
        });
      },
      getoccupationOptions() {
        previewDataInterface("c5d779e9c04247ba86117eccb4647b72").then((res) => {
          this.occupationOptions = res.data;
        });
      },
      geteducationOptions() {
        previewDataInterface("6e066acbf3484dc4aa3a3126c4509dec").then((res) => {
          this.educationOptions = res.data;
        });
      },
      getmarriageStateOptions() {
        previewDataInterface("ff374ae8a79e4559be4d7393cc6bdab8").then((res) => {
          this.marriageStateOptions = res.data;
        });
      },
      getbloodTypeOptions() {
        previewDataInterface("3c80f521d9e04b41b5c5ba40ac9b7ef6").then((res) => {
          this.bloodTypeOptions = res.data;
        });
      },
      goBack() {
        this.$emit("refresh");
      },
      init(id, isDetail) {
        this.dataForm.id = id || 0;
        this.visible = true;
        this.isDetail = isDetail || false;
        this.$nextTick(() => {
          this.$refs["elForm"].resetFields();
          if (this.dataForm.id) {
            this.loading = true;
            request({
              url: "/api/his7/com/chartinfo/ComChrbas/" + this.dataForm.id,
              method: "get",
            }).then((res) => {
              this.dataForm = res.data;
              this.loading = false;
            });
          }
        });
      },
      // 表单提交
      dataFormSubmit() {
        this.$refs["elForm"].validate((valid) => {
          if (valid) {
            if (!this.dataForm.id) {
              request({
                url: `/api/his7/com/chartinfo/ComChrbas`,
                method: "post",
                data: this.dataForm,
              }).then((res) => {
                this.$message({
                  message: res.msg,
                  type: "success",
                  duration: 1000,
                  onClose: () => {
                    (this.visible = false), this.$emit("refresh", true);
                  },
                });
              });
            } else {
              request({
                url: "/api/his7/com/chartinfo/ComChrbas/" + this.dataForm.id,
                method: "PUT",
                data: this.dataForm,
              }).then((res) => {
                this.$message({
                  message: res.msg,
                  type: "success",
                  duration: 1000,
                  onClose: () => {
                    this.visible = false;
                    this.$emit("refresh", true);
                  },
                });
              });
            }
          }
        });
      },
    },
  };
</script>
<style lang="scss">
  .test {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    cursor: pointer;
    background: #7d7ac1;
    font-weight: 500;
    color: #fff;
    padding: 5px;
    padding-left: 15px;
    & ~ div {
      // background: #f3f3f3;
      border: #7d7ac1 1px solid;
      padding: 30px 50px 10px 0;
      overflow: auto;
      margin-bottom: 10px;
      &:after {
        content: "";
        height: 20px;
        display: block;
        clear: both;
      }
    }
  }
</style>
```

